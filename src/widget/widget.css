@import url('https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --font-global: "Manrope", sans-serif;
    --background-global: #F3E9DC;
    --color-text:#4E4E4E;
    --color-button: #4A7543;
    --color-button-text: #FFFFFF;

    --circle-level-1: rgba(74, 117, 67, 0.5);
    --circle-level-2: rgba(74, 117, 67, 0.6);
    --circle-level-3: rgb(74, 117, 67);
    --circle-custom: #4A7543;

    --circle-top: rgba(74, 117, 67, 0.5);
    --circle-mid-top: rgba(74, 117, 67, 0.4);
    --circle-mid-bottom: rgba(74, 117, 67, 0.3);
    --circle-bottom: rgba(74, 117, 67, 0.2);
  }
}

@layer components {
  /* Widget container fixes - more specific selectors */
  #rainbow-relax-container {
    overflow: hidden !important;
    position: relative !important;
    height: 600px !important;
    width: 800px !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: flex-start !important;
    padding-top: 1rem !important;
  }

  /* Full-screen mode for QA and dev environments */
  body.fullscreen-widget #rainbow-relax-container {
    height: 100vh !important;
    width: 100vw !important;
    max-height: 100vh !important;
    max-width: 100vw !important;
  }
  
  /* Manual Tailwind utility classes with rr- prefix */
  .rr-relative { position: relative !important; }
  .rr-absolute { position: absolute !important; }
  .rr-fixed { position: fixed !important; }
  .rr-inset-0 { top: 0 !important; right: 0 !important; bottom: 0 !important; left: 0 !important; }
  .rr-w-full { width: 100% !important; }
  .rr-h-full { height: 100% !important; }
  .rr-flex { display: flex !important; }
  .rr-flex-col { flex-direction: column !important; }
  .rr-flex-grow { flex-grow: 1 !important; }
  .rr-flex-wrap { flex-wrap: wrap !important; }
  .rr-flex-1 { flex: 1 1 0% !important; }
  .rr-flex-row { flex-direction: row !important; }
  
  /* Responsive classes */
  @media (min-width: 640px) {
    .sm\:rr-flex-row { flex-direction: row !important; }
    .sm\:rr-items-start { align-items: flex-start !important; }
    .sm\:rr-text-left { text-align: left !important; }
    .sm\:rr-gap-6 { gap: 1.5rem !important; }
  }
  .rr-items-center { align-items: center !important; }
  .rr-items-start { align-items: flex-start !important; }
  .rr-justify-between { justify-content: space-between !important; }
  .rr-justify-center { justify-content: center !important; }
  .rr-justify-start { justify-content: flex-start !important; }
  .rr-z-10 { z-index: 10 !important; }
  .-rr-z-10 { z-index: -10 !important; }
  /* Spacing */
  .rr-px-4 { padding-left: 1rem !important; padding-right: 1rem !important; }
  .rr-py-4 { padding-top: 1rem !important; padding-bottom: 1rem !important; }
  .rr-px-6 { padding-left: 1.5rem !important; padding-right: 1.5rem !important; }
  .rr-py-2 { padding-top: 0.5rem !important; padding-bottom: 0.5rem !important; }
  .rr-py-3 { padding-top: 0.75rem !important; padding-bottom: 0.75rem !important; }
  .rr-gap-2 { gap: 0.5rem !important; }
  .rr-gap-4 { gap: 1rem !important; }
  .rr-gap-6 { gap: 1.5rem !important; }
  .rr-gap-y-6 { row-gap: 1.5rem !important; }
  .rr-space-x-4 > * + * { margin-left: 1rem !important; }
  .rr-mt-10 { margin-top: 2.5rem !important; }
  .rr-mb-4 { margin-bottom: 1rem !important; }
  .rr-mb-8 { margin-bottom: 2rem !important; }
  .rr-mx-auto { margin-left: auto !important; margin-right: auto !important; }
  
  /* Typography */
  .rr-text-sm { font-size: 0.875rem !important; line-height: 1.25rem !important; }
  .rr-text-base { font-size: 1rem !important; line-height: 1.5rem !important; }
  .rr-text-left { text-align: left !important; }
  .rr-text-center { text-align: center !important; }
  .rr-text-right { text-align: right !important; }
  .rr-text-lg { font-size: 1.125rem !important; line-height: 1.75rem !important; }
  .rr-text-xl { font-size: 1.25rem !important; line-height: 1.75rem !important; }
  .rr-text-2xl { font-size: 1.5rem !important; line-height: 2rem !important; }
  .rr-font-bold { font-weight: 700 !important; }
  .rr-text-center { text-align: center !important; }
  .rr-underline { text-decoration: underline !important; }
  
  /* Visual */
  .rr-rounded-full { border-radius: 9999px !important; }
  .rr-rounded-md { border-radius: 0.375rem !important; }
  .rr-rounded-lg { border-radius: 0.5rem !important; }
  .rr-opacity-80 { opacity: 0.8 !important; }
  .rr-shadow-md { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important; }
  .rr-cursor-pointer { cursor: pointer !important; }
  .cursor-not-allowed { cursor: not-allowed !important; }
  .rr-transition { transition-property: all !important; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important; transition-duration: 150ms !important; }
  .rr-hover\:opacity-80:hover { opacity: 0.8 !important; }
  .hover\:rr-opacity-80:hover { opacity: 0.8 !important; }
  
  /* Custom colors and backgrounds */
  .rr-bg-\[var\(--color-button\)\] { background-color: var(--color-button) !important; }
  .rr-text-\[var\(--color-button-text\)\] { color: var(--color-button-text) !important; }
  .rr-text-\[--font-global\] { font-family: var(--font-global) !important; }
  .rr-text-\[\#4E4E4E\] { color: #4E4E4E !important; }
  .rr-text-black { color: #000000 !important; }
  .rr-text-white { color: #ffffff !important; }
  .rr-text-gray-500 { color: #6b7280 !important; }
  .rr-text-gray-700 { color: #374151 !important; }
  
  .rr-text-black a,
  a.rr-text-black {
    color: #000000 !important;
    text-decoration: underline !important;
    font-weight: bold !important;
  }
  
  .rr-text-black a:hover,
  a.rr-text-black:hover {
    color: #000000 !important;
    opacity: 0.8 !important;
  }
  
  /* Custom font sizes */
  .rr-text-\[15px\] { font-size: 15px !important; }
  .rr-text-\[30px\] { font-size: 30px !important; }
  .rr-text-\[35px\] { font-size: 35px !important; }
  .rr-text-\[40px\] { font-size: 40px !important; }
  .rr-text-\[50px\] { font-size: 50px !important; }
  .rr-text-\[14px\] { font-size: 14px !important; }
  .rr-text-\[18px\] { font-size: 18px !important; }
  .rr-text-\[20px\] { font-size: 20px !important; }
  .rr-text-\[22px\] { font-size: 22px !important; }
  .rr-text-\[clamp\(2rem\,5vw\,3\.125rem\)\] { font-size: clamp(2rem, 5vw, 3.125rem) !important; }
  
  /* Adaptive clamp-based font sizes for widget */
  .rr-text-\[clamp\(1\.5rem\,4vw\,2\.5rem\)\] { font-size: clamp(1.5rem, 4vw, 2.5rem) !important; }
  .rr-text-\[clamp\(1\.75rem\,4\.5vw\,2\.75rem\)\] { font-size: clamp(1.75rem, 4.5vw, 2.75rem) !important; }
  .rr-text-\[clamp\(2rem\,5vw\,3rem\)\] { font-size: clamp(2rem, 5vw, 3rem) !important; }
  .rr-text-\[clamp\(2\.5rem\,6vw\,3\.125rem\)\] { font-size: clamp(2.5rem, 6vw, 3.125rem) !important; }
  .rr-text-\[clamp\(0\.75rem\,2\.5vw\,1\.25rem\)\] { font-size: clamp(0.75rem, 2.5vw, 1.25rem) !important; }
  .rr-text-\[clamp\(0\.875rem\,3vw\,1\.375rem\)\] { font-size: clamp(0.875rem, 3vw, 1.375rem) !important; }
  .rr-text-\[clamp\(1rem\,3\.5vw\,1\.5rem\)\] { font-size: clamp(1rem, 3.5vw, 1.5rem) !important; }
  .rr-text-\[clamp\(1\.125rem\,4vw\,1\.625rem\)\] { font-size: clamp(1.125rem, 4vw, 1.625rem) !important; }
  
  /* Custom spacing */
  .rr-gap-\[2rem\] { gap: 2rem !important; }
  
  /* Sizing */
  .rr-max-w-\[5\.5rem\] { max-width: 5.5rem !important; }
  .rr-max-w-\[600px\] { max-width: 600px !important; }
  .rr-max-w-\[90\%\] { max-width: 90% !important; }
  .rr-max-w-\[75\%\] { max-width: 75% !important; }
  .rr-max-w-\[50\%\] { max-width: 50% !important; }
  .rr-max-w-\[40rem\] { max-width: 40rem !important; }
  .rr-max-w-\[20rem\] { max-width: 20rem !important; }
  .rr-max-w-\[70rem\] { max-width: 70rem !important; }
  .rr-max-w-4xl { max-width: 56rem !important; }
  .rr-max-w-none { max-width: none !important; }
  .rr-max-h-\[50vh\] { max-height: 50vh !important; }
  
      /* Circle dimensions - Base (mobile) - Viewport-based sizing like reference */
      .rr-h-\[35vh\] { height: 35vh !important; }
      .rr-w-\[35vh\] { width: 35vh !important; }
      .rr-h-\[28vh\] { height: 28vh !important; }
      .rr-w-\[28vh\] { width: 28vh !important; }
      .rr-h-\[21vh\] { height: 21vh !important; }
      .rr-w-\[21vh\] { width: 21vh !important; }
      .rr-h-\[14vh\] { height: 14vh !important; }
      .rr-w-\[14vh\] { width: 14vh !important; }
      
      /* Circle dimensions - Base (mobile) - Adaptive clamp-based sizing for widget */
      .rr-h-\[clamp\(200px\,35vh\,400px\)\] { height: clamp(200px, 35vh, 400px) !important; }
      .rr-w-\[clamp\(200px\,35vh\,400px\)\] { width: clamp(200px, 35vh, 400px) !important; }
      .rr-h-\[clamp\(160px\,28vh\,320px\)\] { height: clamp(160px, 28vh, 320px) !important; }
      .rr-w-\[clamp\(160px\,28vh\,320px\)\] { width: clamp(160px, 28vh, 320px) !important; }
      .rr-h-\[clamp\(120px\,21vh\,240px\)\] { height: clamp(120px, 21vh, 240px) !important; }
      .rr-w-\[clamp\(120px\,21vh\,240px\)\] { width: clamp(120px, 21vh, 240px) !important; }
      .rr-h-\[clamp\(80px\,14vh\,160px\)\] { height: clamp(80px, 14vh, 160px) !important; }
      .rr-w-\[clamp\(80px\,14vh\,160px\)\] { width: clamp(80px, 14vh, 160px) !important; }
  
  /* Responsive classes */
  @media (min-width: 640px) {
    /* Circle dimensions - sm (tablet) - Viewport-based sizing like reference */
    .sm\:rr-h-\[45vh\] { height: 45vh !important; }
    .sm\:rr-w-\[45vh\] { width: 45vh !important; }
    .sm\:rr-h-\[35vh\] { height: 35vh !important; }
    .sm\:rr-w-\[35vh\] { width: 35vh !important; }
    .sm\:rr-h-\[26vh\] { height: 26vh !important; }
    .sm\:rr-w-\[26vh\] { width: 26vh !important; }
    .sm\:rr-h-\[18vh\] { height: 18vh !important; }
    .sm\:rr-w-\[18vh\] { width: 18vh !important; }
    
    /* Circle dimensions - sm (tablet) - Adaptive clamp-based sizing for widget */
    .sm\:rr-h-\[clamp\(250px\,45vh\,500px\)\] { height: clamp(250px, 45vh, 500px) !important; }
    .sm\:rr-w-\[clamp\(250px\,45vh\,500px\)\] { width: clamp(250px, 45vh, 500px) !important; }
    .sm\:rr-h-\[clamp\(200px\,35vh\,400px\)\] { height: clamp(200px, 35vh, 400px) !important; }
    .sm\:rr-w-\[clamp\(200px\,35vh\,400px\)\] { width: clamp(200px, 35vh, 400px) !important; }
    .sm\:rr-h-\[clamp\(150px\,26vh\,300px\)\] { height: clamp(150px, 26vh, 300px) !important; }
    .sm\:rr-w-\[clamp\(150px\,26vh\,300px\)\] { width: clamp(150px, 26vh, 300px) !important; }
    .sm\:rr-h-\[clamp\(100px\,18vh\,200px\)\] { height: clamp(100px, 18vh, 200px) !important; }
    .sm\:rr-w-\[clamp\(100px\,18vh\,200px\)\] { width: clamp(100px, 18vh, 200px) !important; }
    /* Other responsive classes */
    .sm\:rr-px-6 { padding-left: 1.5rem !important; padding-right: 1.5rem !important; }
    .sm\:rr-py-2 { padding-top: 0.5rem !important; padding-bottom: 0.5rem !important; }
    .sm\:rr-text-base { font-size: 1rem !important; line-height: 1.5rem !important; }
    .sm\:rr-text-lg { font-size: 1.125rem !important; line-height: 1.75rem !important; }
    .sm\:rr-text-\[35px\] { font-size: 35px !important; }
    .sm\:rr-flex-row { flex-direction: row !important; }
    .sm\:rr-gap-4 { gap: 1rem !important; }
    .sm\:rr-max-w-\[75\%\] { max-width: 75% !important; }
  }
  
  @media (min-width: 768px) {
    /* Circle dimensions - md (desktop) - Viewport-based sizing like reference */
    .md\:rr-h-\[64vh\] { height: 64vh !important; }
    .md\:rr-w-\[64vh\] { width: 64vh !important; }
    .md\:rr-h-\[50vh\] { height: 50vh !important; }
    .md\:rr-w-\[50vh\] { width: 50vh !important; }
    .md\:rr-h-\[35vh\] { height: 35vh !important; }
    .md\:rr-w-\[35vh\] { width: 35vh !important; }
    .md\:rr-h-\[20vh\] { height: 20vh !important; }
    .md\:rr-w-\[20vh\] { width: 20vh !important; }
    
    /* Circle dimensions - md (desktop) - Adaptive clamp-based sizing for widget */
    .md\:rr-h-\[clamp\(300px\,64vh\,600px\)\] { height: clamp(300px, 64vh, 600px) !important; }
    .md\:rr-w-\[clamp\(300px\,64vh\,600px\)\] { width: clamp(300px, 64vh, 600px) !important; }
    .md\:rr-h-\[clamp\(250px\,50vh\,500px\)\] { height: clamp(250px, 50vh, 500px) !important; }
    .md\:rr-w-\[clamp\(250px\,50vh\,500px\)\] { width: clamp(250px, 50vh, 500px) !important; }
    .md\:rr-h-\[clamp\(200px\,35vh\,400px\)\] { height: clamp(200px, 35vh, 400px) !important; }
    .md\:rr-w-\[clamp\(200px\,35vh\,400px\)\] { width: clamp(200px, 35vh, 400px) !important; }
    .md\:rr-h-\[clamp\(120px\,20vh\,240px\)\] { height: clamp(120px, 20vh, 240px) !important; }
    .md\:rr-w-\[clamp\(120px\,20vh\,240px\)\] { width: clamp(120px, 20vh, 240px) !important; }
    /* Other responsive classes */
    .md\:rr-px-8 { padding-left: 2rem !important; padding-right: 2rem !important; }
    .md\:rr-text-xl { font-size: 1.25rem !important; line-height: 1.75rem !important; }
    .md\:rr-text-\[40px\] { font-size: 40px !important; }
    .md\:rr-text-\[18px\] { font-size: 18px !important; }
    .md\:rr-text-\[20px\] { font-size: 20px !important; }
    .md\:rr-text-left { text-align: left !important; }
    .md\:rr-gap-\[2rem\] { gap: 2rem !important; }
    .md\:rr-max-w-\[50\%\] { max-width: 50% !important; }
  }
  
  @media (min-width: 1024px) {
    /* Circle dimensions - lg (large desktop) - Viewport-based sizing like reference */
    .lg\:rr-h-\[83vh\] { height: 83vh !important; }
    .lg\:rr-w-\[83vh\] { width: 83vh !important; }
    .lg\:rr-h-\[63vh\] { height: 63vh !important; }
    .lg\:rr-w-\[63vh\] { width: 63vh !important; }
    .lg\:rr-h-\[43vh\] { height: 43vh !important; }
    .lg\:rr-w-\[43vh\] { width: 43vh !important; }
    .lg\:rr-h-\[24vh\] { height: 24vh !important; }
    .lg\:rr-w-\[24vh\] { width: 24vh !important; }
    
    /* Circle dimensions - lg (large desktop) - Adaptive clamp-based sizing for widget */
    .lg\:rr-h-\[clamp\(350px\,83vh\,700px\)\] { height: clamp(350px, 83vh, 700px) !important; }
    .lg\:rr-w-\[clamp\(350px\,83vh\,700px\)\] { width: clamp(350px, 83vh, 700px) !important; }
    .lg\:rr-h-\[clamp\(300px\,63vh\,600px\)\] { height: clamp(300px, 63vh, 600px) !important; }
    .lg\:rr-w-\[clamp\(300px\,63vh\,600px\)\] { width: clamp(300px, 63vh, 600px) !important; }
    .lg\:rr-h-\[clamp\(250px\,43vh\,500px\)\] { height: clamp(250px, 43vh, 500px) !important; }
    .lg\:rr-w-\[clamp\(250px\,43vh\,500px\)\] { width: clamp(250px, 43vh, 500px) !important; }
    .lg\:rr-h-\[clamp\(140px\,24vh\,280px\)\] { height: clamp(140px, 24vh, 280px) !important; }
    .lg\:rr-w-\[clamp\(140px\,24vh\,280px\)\] { width: clamp(140px, 24vh, 280px) !important; }
    /* Other responsive classes */
    .lg\:rr-text-2xl { font-size: 1.5rem !important; line-height: 2rem !important; }
    .lg\:rr-text-\[50px\] { font-size: 50px !important; }
    .lg\:rr-text-\[22px\] { font-size: 22px !important; }
  }
  
  /* Welcome page - minimal overrides */
  #rainbow-relax-container [data-testid="welcome-page"] {
    position: relative !important;
    z-index: 1 !important; /* Above animation circles which are -z-10 */
  }
  
  /* Animation container - ensure proper height and positioning */
  #rainbow-relax-container [data-testid="main-animation"] {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    overflow: visible !important;
    z-index: 1 !important; /* Above background, below content */
    pointer-events: none !important; /* Allow clicks to pass through to content */
  }
  
  /* Ensure all content is visible */
  #rainbow-relax-container * {
    box-sizing: border-box !important;
  }
  
  /* Breathing circles - ensure visibility and proper positioning */
  #rainbow-relax-container [data-testid^="breathing-circle-"] {
    z-index: 2 !important; /* Above animation container, below content */
    opacity: 0.8 !important; /* Ensure visibility */
    pointer-events: none !important; /* Allow clicks to pass through */
    /* Ensure perfect circles */
    aspect-ratio: 1 !important;
    border-radius: 50% !important;
  }
  
  /* Content elements - ensure they're above circles */
  #rainbow-relax-container [data-testid="welcome-page"],
  #rainbow-relax-container [data-testid="navbar"],
  #rainbow-relax-container [data-testid="thank-you-page"] {
    z-index: 10 !important; /* Above circles */
    position: relative !important;
  }
  
  /* Breathing Instructions - ensure proper containment within widget */
  #rainbow-relax-container .rr-breathing-instructions {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    z-index: 15 !important; /* Above circles and other content */
    overflow: hidden !important;
  }
  
  /* Breathing instruction text - ensure it's visible and contained */
  #rainbow-relax-container .rr-breathing-instructions p,
  #rainbow-relax-container .rr-breathing-instructions h1,
  #rainbow-relax-container .rr-breathing-instructions h2 {
    position: relative !important;
    z-index: 16 !important;
    color: #4E4E4E !important;
  }
  
  /* Breathing instruction buttons - ensure they're above circles */
  #rainbow-relax-container .rr-breathing-instructions button {
    position: relative !important;
    z-index: 16 !important;
  }
  
  /* Don't override Framer Motion animations with CSS keyframes */
  /* The circles use Framer Motion's animate prop, not CSS animations */
  
  /* Breathing Circle Buttons - Custom component styles */
  .breathing-button {
    width: 4.5rem !important;
    height: 4.5rem !important;
    border-radius: 50% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    text-align: center !important;
    border: none !important;
    outline: none !important;
    background-color: var(--circle-level-3) !important;
    color: var(--color-button-text) !important;
    font-weight: bold !important;
    font-family: var(--font-global) !important;
    font-size: clamp(0.5rem, 2vw, 1rem) !important;
  }

  .breathing-button:hover {
    background-color: var(--circle-custom) !important;
    transform: scale(1.05) !important;
  }

  .breathing-button:focus {
    outline: 2px solid var(--color-button) !important;
    outline-offset: 2px !important;
  }

  @media (min-width: 768px) {
    .breathing-button {
      width: 6rem !important;
      height: 6rem !important;
    }
  }
}
